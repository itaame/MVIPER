import{b as c}from"./chunk-UVXAE5YP.js";import{a as u,b as l}from"./chunk-MTJQDUEX.js";var v=class extends c{constructor(e,r){super(e);this.formatter=r;this.mouseMoveListener=e=>{e.time!==this.time&&(this.time=e.time,this.reportMutation())};this.mouseLeaveListener=()=>{this.time=void 0,this.reportMutation()};e.addViewportMouseMoveListener(this.mouseMoveListener),e.addViewportMouseLeaveListener(this.mouseLeaveListener)}drawOverlay(e){if(this.time===void 0)return;let r=Math.round(this.timeline.positionTime(this.time)),n=this.formatter.formatDateTime(this.time,!0),s=12,m=`${s}px Roboto, sans-serif`,a=35,i=4,o=16,h=e.measureText(n,m),t={x:r-h.width/2-i,y:e.height-i-(a-s)/2-s,width:i+h.width+i,height:i+s+i},d=this.timeline.positionTime(this.timeline.start),p=this.timeline.positionTime(this.timeline.stop);t.x<d+o?t.x=d+o:t.x+t.width>p-o&&(t.x=p-o-t.width),e.fillRect(l(u({},t),{fill:"rgba(97, 97, 97, 0.9)",rx:2,ry:2})),e.fillText({x:t.x+i,y:e.height-a/2,align:"left",baseline:"middle",color:"white",font:m,text:n})}disconnectedCallback(){this.timeline.removeViewportMouseMoveListener(this.mouseMoveListener),this.timeline.removeViewportMouseLeaveListener(this.mouseLeaveListener)}};export{v as a};
