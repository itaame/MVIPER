import{a as V,c as O,d as U,e as J}from"./chunk-J6RUEXVW.js";import{Aa as r,Ab as D,Af as L,Ba as d,Eb as j,Fa as $,Ga as w,Ha as m,Hb as F,N as T,O as k,Sa as s,Ua as S,Va as E,Yc as z,Za as q,a as y,b,ba as a,bb as C,cb as x,da as l,f as v,ga as R,id as B,ih as N,ma as p,oh as Y,pf as G,qa as _,qb as A,qh as W,rh as H,va as u,wa as P,xa as I,ya as M,za as c}from"./chunk-MTJQDUEX.js";var Q=t=>({c:t});function X(t,i){t&1&&s(0," s ")}function Z(t,i){if(t&1&&(c(0,"div")(1,"mat-icon",2),s(2,"toll"),r(),c(3,"a",3),s(4),r(),d(5,"br"),r()),t&2){let e=i.$implicit,n=m(2);a(3),_("routerLink",e.link)("queryParams",q(3,Q,n.yamcs.context)),a(),S(" ",e.label," ")}}function ee(t,i){if(t&1){let e=$();c(0,"mat-toolbar"),d(1,"span",4),c(2,"ya-button",5),w("click",function(){T(e);let o=m(2);return k(o.loadMoreData())}),s(3," Load more "),r(),d(4,"span",4),r()}if(t&2){let e=m();a(2),_("disabled",!e.continuationToken)}}function te(t,i){if(t&1&&(c(0,"div",1),s(1),p(2,X,1,0),s(3),C(4,"async"),r(),I(5,Z,6,5,"div",null,P),p(7,ee,5,1,"mat-toolbar")),t&2){let e=i,n=m();a(),E(" Showing ",e.resources.length," of ",e.totalSize," result "),a(),u(e.totalSize!==1?2:-1),a(),S(' for "',x(4,5,n.term$),'". '),a(2),M(e.resources),a(2),u(e.resources.length?7:-1)}}var h=class t{constructor(i,e,n,o){this.yamcs=i;this.messageService=o;this.term$=new v(null);this.result$=new v(null);e.setTitle("Search"),n.queryParamMap.subscribe(K=>{let g=K.get("q")??"";this.fetchPage(g).then(f=>{this.term$.next(g),this.result$.next({resources:this.toResources(f.parameters||[]),totalSize:f.totalSize,continuationToken:f.continuationToken})})})}loadMoreData(){let i=this.term$.value??"",e=this.result$.value?.continuationToken;this.fetchPage(i,e).then(n=>{let o=this.result$.value;o.resources=[...o.resources,...this.toResources(n.parameters||[])],this.result$.next(b(y({},o),{continuationToken:n.continuationToken}))})}toResources(i){return i.map(e=>({label:e.qualifiedName,type:"Parameter",link:["/telemetry/parameters"+e.qualifiedName]}))}fetchPage(i,e){let n=this.yamcs.yamcsClient.getParameters(this.yamcs.instance,{q:i,next:e,limit:50,searchMembers:!0});return n.catch(o=>this.messageService.showError(o)),n}static{this.\u0275fac=function(e){return new(e||t)(l(N),l(D),l(j),l(G))}}static{this.\u0275cmp=R({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[1,"panel-content"],[2,"margin-bottom","1em"],[1,"icon12",2,"vertical-align","middle","margin-right","4px"],[1,"ya-link",3,"routerLink","queryParams"],[2,"flex","1 1 auto"],[3,"click","disabled"]],template:function(e,n){if(e&1&&(c(0,"app-instance-page")(1,"app-instance-toolbar"),s(2,"Search results"),r(),c(3,"div",0),p(4,te,8,7),C(5,"async"),r()()),e&2){let o;a(4),u((o=x(5,1,n.result$))?4:-1,o)}},dependencies:[O,V,Y,A,F,z,B,L],encapsulation:2,changeDetection:0})}};var be=[{path:"",canActivate:[W,U],canActivateChild:[H],runGuardsAndResolvers:"always",component:J,children:[{path:"",pathMatch:"full",component:h}]}];export{be as ROUTES};
