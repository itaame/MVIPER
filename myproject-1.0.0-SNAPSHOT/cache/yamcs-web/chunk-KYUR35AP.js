import{a as Yt}from"./chunk-CS6YXD3A.js";import{a as zt}from"./chunk-E6SJ4ZO6.js";import{$ as ke,$c as De,$e as Ve,Aa as a,Ab as oe,Ac as Y,Af as G,Ba as f,Bc as se,Ca as y,Da as w,Db as st,Eb as ae,Eg as At,Fa as D,Fb as re,Fc as dt,Ga as _,Gb as ye,Gc as me,Ha as p,Hb as z,He as Me,Ia as Se,Ib as mt,Ie as je,Ja as ne,Jc as ut,Kc as pe,Ke as Te,Le as bt,Lf as Ot,Lg as ge,Ma as X,N as C,Na as K,Nc as de,Ne as vt,O as b,Oa as J,Qf as Pt,Ra as N,Re as kt,Rg as Ft,Sa as l,Se as xt,Sg as _e,Ta as B,Tc as ft,Te as St,Ua as M,Ue as Ee,Ve as yt,We as Oe,Wf as Lt,Xc as ue,Xe as Pe,Ya as rt,Yc as fe,Ye as Le,Yg as We,Za as Z,_c as gt,_e as Ie,ba as c,bb as u,bf as Re,cb as v,cf as wt,da as d,db as E,dc as pt,ef as Dt,f as $,ff as Ae,ga as k,hd as _t,hf as Fe,id as ht,if as $e,ih as j,jd as Ct,jg as It,kg as Ue,ma as g,mf as Bt,mg as ze,nf as Mt,ng as Ye,of as jt,og as Vt,oh as x,pf as Ne,pg as Rt,ph as $t,qa as m,qb as U,qh as Nt,ra as xe,rc as we,rh as Ut,s as ot,sa as T,t as at,te as L,ue as I,va as S,vb as lt,ve as Be,wa as ee,wb as ct,wc as le,we as V,xa as te,xe as R,ya as ie,yc as ce,ye as A,yf as Tt,za as o,ze as W,zf as Et}from"./chunk-MTJQDUEX.js";var Ht=[[["app-storage-toolbar"]],[["ya-detail-pane"]],"*"],Qt=["app-storage-toolbar","ya-detail-pane","*"],H=class i{constructor(){this.noscroll=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-storage-page"]],inputs:{noscroll:"noscroll"},ngContentSelectors:Qt,decls:4,vars:2,consts:[[1,"page-content"]],template:function(e,n){e&1&&(Se(Ht),ne(0),o(1,"div",0),ne(2,1),ne(3,2),a()),e&2&&(c(),xe("overflow",n.noscroll?"hidden":"auto"))},dependencies:[x],styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto;font:400 12px/20px Roboto,sans-serif}"],changeDetection:0})}};var qt=["*"],Q=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-storage-toolbar"]],ngContentSelectors:qt,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(e,n){e&1&&(Se(),o(0,"mat-toolbar",0)(1,"mat-toolbar-row"),ne(2),f(3,"span",1),a()())},dependencies:[x,ht,_t],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:var(--y-background-color);box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0})}};var Ge=class i{constructor(t,e,n,r,s){this.dialogRef=t;this.data=r;this.messageService=s;this.storageClient=n.createStorageClient(),this.form=e.group({name:["",ce.required]})}save(){this.storageClient.createBucket({name:this.form.value.name}).then(()=>this.dialogRef.close(!0)).catch(t=>{this.dialogRef.close(!1),this.messageService.showError(t)})}static{this.\u0275fac=function(e){return new(e||i)(d(L),d(ue),d(j),d(I),d(Ne))}}static{this.\u0275cmp=k({type:i,selectors:[["app-create-bucket-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Create bucket"),a(),o(2,"mat-dialog-content")(3,"form",1)(4,"label"),l(5," Bucket name "),f(6,"input",2),a()()(),o(7,"mat-dialog-actions",3)(8,"ya-button",4),l(9,"CANCEL"),a(),o(10,"ya-button",5),_("click",function(){return n.save()}),l(11,"SAVE"),a()()),e&2&&(c(3),m("formGroup",n.form),c(7),m("disabled",!n.form.valid))},dependencies:[x,me,le,Y,se,pe,de,V,R,W,A,G],encapsulation:2})}};var Zt=i=>[i];function ei(i,t){if(i&1){let e=D();o(0,"ya-page-button",27),_("clicked",function(){C(e);let r=p();return b(r.createBucket())}),l(1," Create bucket "),a()}}function ti(i,t){if(i&1){let e=D();o(0,"ya-page-button",28),_("clicked",function(){C(e);let r=p();return b(r.deleteSelectedBuckets())}),l(1," Delete "),a()}if(i&2){let e=p();m("disabled",!e.selection.hasValue())}}function ii(i,t){if(i&1){let e=D();o(0,"input",31),_("change",function(r){C(e);let s=p(2);return b(r?s.masterToggle():null)}),a()}if(i&2){let e=p(2);m("checked",e.selection.hasValue()&&e.isAllSelected())}}function ni(i,t){if(i&1&&(o(0,"th",29),g(1,ii,1,1,"input",30),a()),i&2){let e=p();c(),S(e.mayManageBuckets()?1:-1)}}function oi(i,t){if(i&1){let e=D();o(0,"input",33),_("click",function(r){return C(e),b(r.stopPropagation())})("change",function(r){C(e);let s=p().$implicit,h=p();return b(r?h.selection.toggle(s):null)}),a()}if(i&2){let e=p().$implicit,n=p();m("checked",n.selection.isSelected(e))}}function ai(i,t){if(i&1&&(o(0,"td",32),g(1,oi,1,1,"input",30),a()),i&2){let e=p();c(),S(e.mayManageBuckets()?1:-1)}}function ri(i,t){i&1&&(o(0,"th",34),l(1,"Bucket"),a())}function li(i,t){if(i&1){let e=D();o(0,"td",35)(1,"mat-icon",36),l(2," shopping_basket "),a(),o(3,"a",37),_("click",function(r){return C(e),b(r.stopPropagation())}),l(4),a()()}if(i&2){let e=t.$implicit;c(3),m("routerLink",Z(2,Zt,e.name)),c(),B(e.name)}}function ci(i,t){i&1&&(o(0,"th",34),l(1,"Created"),a())}function si(i,t){if(i&1&&(o(0,"td",35),l(1),u(2,"datetime"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),B(E(3,3,v(2,1,e.created),"-"))}}function mi(i,t){i&1&&(o(0,"th",38),l(1,"Used"),a())}function pi(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"formatBytes"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),M(" ",E(3,3,v(2,1,e.size),"-")," ")}}function di(i,t){i&1&&(o(0,"th",38),l(1," Available "),a())}function ui(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"formatBytes"),u(3,"nvl"),a()),i&2){let e=t.$implicit,n=p();c(),M(" ",E(3,3,v(2,1,n.zeroOrMore(e.maxSize-e.size)),"-")," ")}}function fi(i,t){i&1&&(o(0,"th",40),l(1,"Capacity"),a())}function gi(i,t){if(i&1&&(o(0,"td",35),f(1,"ya-progress",41),a()),i&2){let e=t.$implicit;c(),m("value",e.size)("total",e.maxSize)}}function _i(i,t){i&1&&(o(0,"th",38),l(1,"Objects"),a())}function hi(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"number"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),M(" ",E(3,3,v(2,1,e.numObjects),"-")," ")}}function Ci(i,t){i&1&&(o(0,"th",38),l(1," Avail. objects "),a())}function bi(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"number"),u(3,"nvl"),a()),i&2){let e=t.$implicit,n=p();c(),M(" ",E(3,3,v(2,1,n.zeroOrMore(e.maxObjects-e.numObjects)),"-")," ")}}function vi(i,t){i&1&&(o(0,"th",40),l(1,"%objects"),a())}function ki(i,t){if(i&1&&(o(0,"td",35),f(1,"ya-progress",41),a()),i&2){let e=t.$implicit;c(),m("value",e.numObjects)("total",e.maxObjects)}}function xi(i,t){i&1&&(o(0,"th",40),l(1,"Location"),a())}function Si(i,t){if(i&1&&(o(0,"td",35),l(1),a()),i&2){let e=t.$implicit;c(),M(" ",e.location.description," ")}}function yi(i,t){i&1&&f(0,"th",42)}function wi(i,t){if(i&1){let e=D();o(0,"ya-more")(1,"button",43),_("click",function(){C(e);let r=p().$implicit,s=p();return b(s.deleteBucket(r))}),l(2,"Delete bucket"),a()()}}function Di(i,t){if(i&1&&(o(0,"td",35),g(1,wi,3,0,"ya-more"),a()),i&2){let e=p();c(),S(e.mayManageBuckets()?1:-1)}}function Bi(i,t){i&1&&f(0,"tr",44)}function Mi(i,t){if(i&1){let e=D();o(0,"tr",45),_("click",function(){let r=C(e).$implicit,s=p();return b(s.toggleOne(r))}),a()}if(i&2){let e=t.$implicit,n=p();T("selected",n.selection.isSelected(e))}}var He=class i{constructor(t,e,n,r,s,h,q){this.yamcs=t;this.dialog=e;this.router=n;this.route=r;this.messageService=s;this.authService=h;this.filterControl=new dt;this.displayedColumns=["select","name","created","size","avail","capacity","numObjects","availObjects","pctObjects","location","actions"];this.dataSource=new $e;this.selection=new we(!0,[]);q.setTitle("Buckets"),this.storageClient=this.yamcs.createStorageClient(),this.initializeOptions(),this.refreshView()}ngAfterViewInit(){this.dataSource.sort=this.sort}initializeOptions(){let t=this.route.snapshot.queryParamMap;t.has("filter")&&(this.filterControl.setValue(t.get("filter")),this.dataSource.filter=t.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let e=this.filterControl.value||"";this.dataSource.filter=e.toLowerCase();for(let n of this.selection.selected)this.dataSource.filteredData.indexOf(n)===-1&&this.selection.deselect(n)})}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createBucket(){this.dialog.open(Ge,{width:"400px"}).afterClosed().subscribe(e=>{e&&this.refreshView()})}zeroOrMore(t){return Math.max(0,t)}mayManageBuckets(){return this.authService.getUser().hasSystemPrivilege("ManageAnyBucket")}deleteSelectedBuckets(){if(confirm("Are you sure you want to delete the selected buckets?")){let t=[];for(let e of this.selection.selected){let n=this.storageClient.deleteBucket(e.name);t.push(n)}Promise.all(t).then(()=>{this.selection.clear(),this.refreshView()})}}deleteBucket(t){confirm(`Are you sure you want to delete the bucket ${t.name}?`)&&this.storageClient.deleteBucket(t.name).then(()=>{this.selection.clear(),this.refreshView()}).catch(e=>this.messageService.showError(e))}selectNext(){let t=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let n=this.selection.selected[this.selection.selected.length-1];t.indexOf(n)!==-1&&(e=Math.min(t.indexOf(n)+1,t.length-1))}this.selection.clear(),this.selection.select(t[e])}selectPrevious(){let t=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let n=this.selection.selected[0];t.indexOf(n)!==-1&&(e=Math.max(t.indexOf(n)-1,0))}this.selection.clear(),this.selection.select(t[e])}applySelection(){if(this.selection.hasValue()&&this.selection.selected.length===1){let t=this.selection.selected[0];this.router.navigate(["/buckets",t.name])}}refreshView(){this.updateURL(),this.storageClient.getBuckets().then(t=>{this.dataSource.data=t}).catch(t=>this.messageService.showError(t))}updateURL(){let t=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:t||null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(e){return new(e||i)(d(j),d(Be),d(ye),d(ae),d(Ne),d($t),d(oe))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&X(Ee,7),e&2){let r;K(r=J())&&(n.sort=r.first)}},decls:44,vars:6,consts:[["icon","add_circle_outline"],["icon","delete",3,"disabled"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter buckets",3,"onArrowDown","onArrowUp","onEnter","formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","size"],["mat-header-cell","","mat-sort-header","","style","text-align: right",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","avail"],["matColumnDef","capacity"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","numObjects"],["matColumnDef","availObjects"],["matColumnDef","pctObjects"],["matColumnDef","location"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["icon","add_circle_outline",3,"clicked"],["icon","delete",3,"clicked","disabled"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["mat-header-cell","","mat-sort-header","",2,"text-align","right"],["mat-cell","",2,"text-align","right"],["mat-header-cell",""],[3,"value","total"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,n){e&1&&(o(0,"app-storage-page")(1,"app-storage-toolbar"),l(2," Storage \xA0\xA0\xA0 "),g(3,ei,2,0,"ya-page-button",0)(4,ti,2,1,"ya-page-button",1),a(),o(5,"div",2)(6,"div",3)(7,"ya-search-filter",4),_("onArrowDown",function(){return n.selectNext()})("onArrowUp",function(){return n.selectPrevious()})("onEnter",function(){return n.applySelection()}),a()(),o(8,"table",5),y(9,6),g(10,ni,2,1,"th",7)(11,ai,2,1,"td",8),w(),y(12,9),g(13,ri,2,0,"th",10)(14,li,5,4,"td",11),w(),y(15,12),g(16,ci,2,0,"th",10)(17,si,4,6,"td",11),w(),y(18,13),g(19,mi,2,0,"th",14)(20,pi,4,6,"td",15),w(),y(21,16),g(22,di,2,0,"th",14)(23,ui,4,6,"td",15),w(),y(24,17),g(25,fi,2,0,"th",18)(26,gi,2,2,"td",11),w(),y(27,19),g(28,_i,2,0,"th",14)(29,hi,4,6,"td",15),w(),y(30,20),g(31,Ci,2,0,"th",14)(32,bi,4,6,"td",15),w(),y(33,21),g(34,vi,2,0,"th",18)(35,ki,2,2,"td",11),w(),y(36,22),g(37,xi,2,0,"th",18)(38,Si,2,1,"td",11),w(),y(39,23),g(40,yi,1,0,"th",24)(41,Di,2,1,"td",11),w(),g(42,Bi,1,0,"tr",25)(43,Mi,1,2,"tr",26),a()()()),e&2&&(c(3),S(n.mayManageBuckets()?3:-1),c(),S(n.mayManageBuckets()?4:-1),c(3),m("formControl",n.filterControl),c(),m("dataSource",n.dataSource),c(34),m("matHeaderRowDef",n.displayedColumns),c(),m("matRowDefColumns",n.displayedColumns))},dependencies:[x,ct,Y,ut,z,Me,je,Te,fe,De,Ee,yt,Oe,Le,wt,Ie,Pe,Dt,Ve,Re,Ae,Fe,Ue,ze,Vt,Rt,ge,_e,We,H,Q],encapsulation:2,changeDetection:0})}};var ji=i=>["/storage/buckets",i,"objects"],Ti=i=>["/storage/buckets",i,"properties"],Ce=class i{constructor(t){this.yamcs=t}static{this.\u0275fac=function(e){return new(e||i)(d(j))}}static{this.\u0275cmp=k({type:i,selectors:[["app-bucket-page-tabs"]],inputs:{bucket:"bucket"},decls:10,vars:10,consts:[["rla","routerLinkActive"],["rlb","routerLinkActive"],["tabPanel",""],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"]],template:function(e,n){if(e&1&&(o(0,"nav",3)(1,"a",4,0),l(3," Objects "),a(),o(4,"a",4,1),l(6," Properties "),a()(),o(7,"mat-tab-nav-panel",null,2),f(9,"router-outlet"),a()),e&2){let r=N(2),s=N(5),h=N(8);m("mat-stretch-tabs",!1)("tabPanel",h),c(),m("routerLink",Z(6,ji,n.bucket))("active",r.isActive),c(3),m("routerLink",Z(8,Ti,n.bucket))("active",s.isActive)}},dependencies:[x,re,z,mt,Bt,jt,Mt],styles:[".mat-mdc-tab-link[_ngcontent-%COMP%]{height:36px;min-width:0;font-size:13px}"],changeDetection:0})}};var qe=class i{constructor(t,e,n,r){this.dialogRef=t;this.data=r;this.storageClient=n.createStorageClient(),this.form=e.group({name:["",ce.required]})}save(){let{path:t,bucket:e}=this.data;t.startsWith("/")&&(t=t.substring(1));let n=this.form.value.name,r=t?`${t}/${n}/`:`${n}/`;this.storageClient.uploadObject(e,r,new Blob).then(()=>this.dialogRef.close(!0))}static{this.\u0275fac=function(e){return new(e||i)(d(L),d(ue),d(j),d(I))}}static{this.\u0275cmp=k({type:i,selectors:[["app-create-bucket-folder-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name","pattern","\\w[\\w\\s\\.\\-\\(\\)\\[\\]]*"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Create folder"),a(),o(2,"mat-dialog-content")(3,"form",1)(4,"label"),l(5," Folder name "),f(6,"input",2),a()()(),o(7,"mat-dialog-actions",3)(8,"ya-button",4),l(9,"CANCEL"),a(),o(10,"ya-button",5),_("click",function(){return n.save()}),l(11,"CREATE"),a()()),e&2&&(c(3),m("formGroup",n.form),c(7),m("disabled",!n.form.valid))},dependencies:[x,me,le,Y,se,ft,pe,de,V,R,W,A,G],encapsulation:2,changeDetection:0})}};var Xe=class i{constructor(t,e,n,r){this.dialogRef=t;this.data=r;this.storageClient=n.createStorageClient();let s=Ot.getFilename(this.data.name);this.filenameForm=e.group({name:[s,[ce.required]]})}async rename(){let t,e=this.data.name.lastIndexOf("/");e!==-1&&(t=this.data.name.substring(0,e+1));let r=await(await this.storageClient.getObject(this.data.bucket,this.data.name)).blob(),s=(t||"")+this.filenameForm.get("name").value;await this.storageClient.uploadObject(this.data.bucket,s,r),await this.storageClient.deleteObject(this.data.bucket,this.data.name),this.dialogRef.close(s)}static{this.\u0275fac=function(e){return new(e||i)(d(L),d(ue),d(j),d(I))}}static{this.\u0275cmp=k({type:i,selectors:[["app-rename-object-dialog"]],decls:13,vars:4,consts:[["filename",""],["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){if(e&1){let r=D();o(0,"h2",1),l(1,"Rename file"),a(),o(2,"mat-dialog-content")(3,"form",2)(4,"label"),l(5," Name "),f(6,"input",3,0),a()()(),o(8,"mat-dialog-actions",4)(9,"ya-button",5),l(10,"CANCEL"),a(),o(11,"ya-button",6),_("click",function(){return C(r),b(n.rename())}),l(12," RENAME "),a()()}if(e&2){let r;c(3),m("formGroup",n.filenameForm),c(),T("invalid",(r=n.filenameForm.get("name"))==null?null:r.invalid),c(7),m("disabled",!n.filenameForm.valid)}},dependencies:[x,me,le,Y,se,pe,de,V,R,W,A,G],encapsulation:2})}};var Ei=["tableWrapper"];function Oi(i,t){i&1&&l(0," Finished ")}function Pi(i,t){if(i&1&&(o(0,"mat-icon",8),l(1,"error"),a(),l(2," Failed ")),i&2){let e=p().$implicit;m("matTooltip",e.err)}}function Li(i,t){i&1&&f(0,"ya-dots")}function Ii(i,t){if(i&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",7),g(4,Oi,1,0)(5,Pi,3,1)(6,Li,1,0,"ya-dots"),a()()),i&2){let e=t.$implicit;T("failed",e.err),c(2),B(e.filename),c(2),S(e.complete&&!e.err?4:-1),c(),S(e.complete&&e.err?5:-1),c(),S(e.complete?-1:6)}}var Ke=class i{constructor(t,e){this.data=e;this.uploads$=e.uploads$.pipe(at(500))}static{this.\u0275fac=function(e){return new(e||i)(d(L),d(I))}}static{this.\u0275cmp=k({type:i,selectors:[["app-upload-progress-dialog"]],viewQuery:function(e,n){if(e&1&&X(Ei,7),e&2){let r;K(r=J())&&(n.tableWrapper=r.first)}},decls:13,vars:2,consts:[["tableWrapper",""],["mat-dialog-title",""],[2,"float","right"],["mat-icon-button","","mat-dialog-close",""],[1,"table-wrapper"],[2,"font-size","small","width","100%"],[3,"failed"],[2,"width","100px","text-align","center"],[1,"icon14",2,"vertical-align","middle",3,"matTooltip"]],template:function(e,n){e&1&&(o(0,"h3",1)(1,"div",2)(2,"button",3)(3,"mat-icon"),l(4,"close"),a()()(),l(5,` Uploads
`),a(),o(6,"mat-dialog-content")(7,"div",4,0)(9,"table",5),te(10,Ii,7,6,"tr",6,ee),u(12,"async"),a()()()),e&2&&(c(10),ie(v(12,0,n.uploads$)))},dependencies:[x,U,pt,V,R,A,fe,gt,Pt],styles:["tr.failed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:red}h3.mat-mdc-dialog-title[_ngcontent-%COMP%]{background-color:#24292e;color:#fff;margin:0;padding-left:5px;font-size:16px;line-height:40px}table[_ngcontent-%COMP%]{border-collapse:collapse}.table-wrapper[_ngcontent-%COMP%]{height:150px;overflow-y:scroll;overflow-x:hidden;padding:5px}"],changeDetection:0})}};function Vi(i,t){if(i&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a()()),i&2){let e,n=t.$implicit;c(2),B(n.key),c(2),B((e=n.value)!==null&&e!==void 0?e:"-")}}var Je=class i{constructor(t,e){this.dialogRef=t;this.data=e}static{this.\u0275fac=function(e){return new(e||i)(d(L),d(I))}}static{this.\u0275cmp=k({type:i,selectors:[["app-view-object-metadata-dialog"]],decls:15,vars:2,consts:[["mat-dialog-title",""],["yaDataTable","",1,"expand"],["width","1"],["align","end"],["mat-dialog-close",""]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Object Metadata"),a(),o(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th",2),l(6,"Key"),a(),o(7,"th"),l(8,"Value"),a()(),te(9,Vi,5,2,"tr",null,ee),u(11,"keyvalue"),a()(),o(12,"mat-dialog-actions",3)(13,"ya-button",4),l(14,"CLOSE"),a()()),e&2&&(c(9),ie(v(11,0,n.data.metadata)))},dependencies:[x,lt,At,V,R,W,A,G],encapsulation:2})}};var Ri=["droparea"],Ai=["uploader"],Fi=()=>["/storage/buckets"],$i=i=>["/storage/buckets",i,"objects"];function Ni(i,t){if(i&1&&f(0,"img",13),i&2){let e=p();m("src",e.selection.selected[0].objectUrl,ke)}}function Ui(i,t){i&1&&(o(0,"div",14)(1,"mat-icon"),l(2,"arrow_back"),a(),o(3,"p"),l(4,"Select an image to make it appear here"),a()())}function zi(i,t){if(i&1&&f(0,"ya-breadcrumb",20),i&2){let e=t.$implicit;m("link",e.route)("label",e.name)}}function Yi(i,t){if(i&1&&(o(0,"div",17)(1,"ya-breadcrumb-trail"),f(2,"ya-breadcrumb",19)(3,"ya-breadcrumb",20),te(4,zi,1,2,"ya-breadcrumb",20,ee),a()()),i&2){let e=p();c(2),m("link",rt(3,Fi)),c(),m("link",Z(4,$i,e.name))("label",e.name),c(),ie(t)}}function Wi(i,t){if(i&1){let e=D();o(0,"th",34)(1,"input",35),_("change",function(r){C(e);let s=p(2);return b(r?s.masterToggle():null)}),a()()}if(i&2){let e=p(2);c(),m("checked",e.selection.hasValue()&&e.isAllSelected())}}function Gi(i,t){if(i&1){let e=D();o(0,"td",36)(1,"input",37),_("click",function(r){return C(e),b(r.stopPropagation())})("change",function(r){let s=C(e).$implicit,h=p(2);return b(r?h.selection.toggle(s):null)}),a()()}if(i&2){let e=t.$implicit,n=p(2);c(),m("checked",n.selection.isSelected(e))}}function Hi(i,t){i&1&&(o(0,"th",38),l(1,"Name"),a())}function Qi(i,t){if(i&1){let e=D();o(0,"mat-icon",40),l(1," folder "),a(),o(2,"a",41),_("click",function(r){return C(e),b(r.stopPropagation())}),l(3),u(4,"filename"),a()}if(i&2){let e=p().$implicit,n=p(2);c(2),m("routerLink","/storage/buckets/"+n.name+"/objects/"+e.name),c(),M(" ",v(4,2,e.name)," ")}}function qi(i,t){if(i&1){let e=D();o(0,"mat-icon",40),l(1," description "),a(),o(2,"a",42),_("click",function(r){return C(e),b(r.stopPropagation())}),l(3),u(4,"filename"),a()}if(i&2){let e=p().$implicit;c(2),m("href",e.objectUrl,ke),c(),M(" ",v(4,2,e.name)," ")}}function Xi(i,t){if(i&1&&(o(0,"td",39),g(1,Qi,5,4)(2,qi,5,4),a()),i&2){let e=t.$implicit;c(),S(e.folder?1:2)}}function Ki(i,t){i&1&&(o(0,"th",38),l(1,"Date modified"),a())}function Ji(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"datetime"),a()),i&2){let e=t.$implicit;c(),M(" ",v(2,1,e.modified)||"-"," ")}}function Zi(i,t){i&1&&(o(0,"th",38),l(1,"Size"),a())}function en(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"formatBytes"),a()),i&2){let e=t.$implicit;c(),M(" ",v(2,1,e.size)||"-"," ")}}function tn(i,t){i&1&&f(0,"th",43)}function nn(i,t){if(i&1){let e=D();o(0,"ya-more")(1,"button",44),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.renameFile(r))}),l(2,"Rename"),a(),o(3,"a",45),l(4,"Download"),a(),f(5,"mat-divider"),o(6,"button",46),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.openViewMetadataDialog(r))}),l(7," View metadata "),a(),f(8,"mat-divider"),o(9,"button",44),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.deleteFile(r))}),l(10,"Delete"),a()()}if(i&2){let e=p().$implicit;c(3),m("href",e.objectUrl,ke),c(3),m("disabled",!e.metadata)}}function on(i,t){if(i&1&&(o(0,"td",39),g(1,nn,11,2,"ya-more"),a()),i&2){let e=t.$implicit;c(),S(e.folder?-1:1)}}function an(i,t){i&1&&f(0,"tr",47)}function rn(i,t){if(i&1){let e=D();o(0,"tr",48),_("click",function(){let r=C(e).$implicit,s=p(2);return b(s.toggleOne(r))}),a()}if(i&2){let e=t.$implicit,n=p(2);T("selected",n.selection.isSelected(e))}}function ln(i,t){if(i&1&&(o(0,"table",18),y(1,21),g(2,Wi,2,1,"th",22)(3,Gi,2,1,"td",23),w(),y(4,24),g(5,Hi,2,0,"th",25)(6,Xi,3,1,"td",26),w(),y(7,27),g(8,Ki,2,0,"th",25)(9,Ji,3,3,"td",26),w(),y(10,28),g(11,Zi,2,0,"th",25)(12,en,3,3,"td",26),w(),y(13,29),g(14,tn,1,0,"th",30)(15,on,2,1,"td",31),w(),g(16,an,1,0,"tr",32)(17,rn,1,2,"tr",33),a()),i&2){let e=p();m("dataSource",e.dataSource),c(16),m("cdkHeaderRowDef",e.displayedColumns),c(),m("cdkRowDefColumns",e.displayedColumns)}}function cn(i,t){i&1&&(o(0,"ya-empty-message"),l(1,"Empty directory."),a())}var Ze=class i{constructor(t,e,n,r,s){this.dialog=t;this.route=n;this.breadcrumb$=new $([]);this.dragActive$=new $(!1);this.showPreview$=new $(!1);this.previewWidth$=new $(600);this.displayedColumns=["select","name","size","modified","actions"];this.dataSource=new $e([]);this.selection=new we(!0,[]);this.uploads$=new $([]);this.progressDialogOpen=!1;this.name=n.snapshot.parent.parent.paramMap.get("name"),s.setTitle(this.name),this.storageClient=r.createStorageClient(),this.loadCurrentFolder(),this.routerSubscription=e.events.pipe(ot(h=>h instanceof st)).subscribe(()=>{this.loadCurrentFolder()})}loadCurrentFolder(){let t={delimiter:"/"},e=this.route.snapshot.url;e.length&&(t.prefix=e.map(n=>n.path).join("/")+"/"),this.storageClient.listObjects(this.name,t).then(n=>{this.updateBrowsePath(),this.changedir(n)})}changedir(t){this.selection.clear();let e=[];for(let n of t.prefixes||[])e.push({folder:!0,name:n});for(let n of t.objects||[])n.name.endsWith("/")||e.push({folder:!1,name:n.name,modified:n.created,size:n.size,objectUrl:this.storageClient.getObjectURL(this.name,n.name),metadata:n.metadata});this.dataSource.data=e}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createFolder(){this.dialog.open(qe,{width:"400px",data:{bucket:this.name,path:this.getCurrentPath()}}).afterClosed().subscribe({next:()=>this.loadCurrentFolder()})}uploadObjects(){let t=this.getCurrentPath();t.startsWith("/")&&(t=t.substring(1));let e=this.uploaderEl.nativeElement.files,n=[];for(let r in e)if(!isNaN(parseInt(r,10))){let s=e[r],h=t?t+"/"+s.name:s.name,q=this.name,ve=this.storageClient.uploadObject(q,h,s);n.push({filename:s.name,promise:ve})}n.length&&this.showUploadProgress().then(()=>{for(let r of n)this.trackUpload(r);this.settlePromises(n.map(r=>r.promise)).then(()=>{this.loadCurrentFolder()})})}settlePromises(t){return Promise.all(t.map(e=>e.then(n=>({state:"fullfilled",value:n}),n=>({state:"rejected",value:n}))))}trackUpload(t){t.promise.then(()=>{t.complete=!0,this.uploads$.next([...this.uploads$.value])}).catch(e=>{e.response.json().then(n=>{t.complete=!0,t.err=n.msg,this.uploads$.next([...this.uploads$.value])}).catch(()=>{t.complete=!0,t.err=e.statusText,this.uploads$.next([...this.uploads$.value])})}),this.uploads$.next([...this.uploads$.value,t])}getCurrentPath(){let t="";for(let e of this.route.snapshot.url)t+="/"+e.path;return t||"/"}togglePreview(){this.showPreview$.next(!this.showPreview$.value)}deleteSelectedObjects(){let t=[],e=[];for(let n of this.selection.selected)n.folder?e.push(this.storageClient.listObjects(this.name,{prefix:n.name}).then(r=>{let s=r.objects||[];t.push(...s.map(h=>h.name))})):t.push(n.name);Promise.all(e).then(()=>{if(confirm(`You are about to delete ${t.length} files. Are you sure you want to continue?`)){let n=[];for(let r of t)n.push(this.storageClient.deleteObject(this.name,r));Promise.all(n).then(()=>{this.loadCurrentFolder()})}})}renameFile(t){this.dialog.open(Xe,{data:{bucket:this.name,name:t.name},width:"400px"}).afterClosed().subscribe(n=>{n&&this.loadCurrentFolder()})}deleteFile(t){confirm(`Are you sure you want to delete ${t.name}?`)&&this.storageClient.deleteObject(this.name,t.name).then(()=>{this.loadCurrentFolder()})}openViewMetadataDialog(t){this.dialog.open(Je,{width:"600px",data:{metadata:t.metadata||{}}})}dragEnter(t){return this.dragActive$.next(!0),t.preventDefault(),t.stopPropagation(),!1}dragOver(t){return t.preventDefault(),t.stopPropagation(),!1}dragLeave(t){return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}drop(t){let e=t.dataTransfer||{};if(e){let n=this.getCurrentPath().substring(1);n!==""&&(n+="/"),Yt(e).then(r=>{if(r.length){let s=[];this.showUploadProgress().then(()=>{for(let h of r){let q=n+h._fullPath,ve=this.storageClient.uploadObject(this.name,q,h);this.trackUpload({filename:h._fullPath,promise:ve}),s.push(ve)}this.settlePromises(s).then(()=>{this.loadCurrentFolder()})})}})}return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}updateBrowsePath(){let t=[],e="";for(let n of this.route.snapshot.url)e+="/"+n.path,t.push({name:n.path,route:`/storage/buckets/${this.name}/objects`+e});return this.breadcrumb$.next(t),e||"/"}isImage(t){if(t.folder)return!1;let e=t.name.toLocaleLowerCase();return e.endsWith(".png")||e.endsWith(".gif")||e.endsWith(".jpg")||e.endsWith("jpeg")||e.endsWith("bmp")||e.endsWith("svg")||e.endsWith("ico")}async showUploadProgress(){if(!this.progressDialogOpen)return this.dialogRef=this.dialog.open(Ke,{position:{bottom:"10px",right:"10px"},width:"500px",data:{uploads$:this.uploads$},hasBackdrop:!1,autoFocus:!1,panelClass:["progress-dialog","elevation-z1"]}),this.dialogRef.afterOpened().subscribe(()=>this.progressDialogOpen=!0),this.dialogRef.afterClosed().subscribe(()=>{this.uploads$.next([]),this.progressDialogOpen=!1}),new Promise((t,e)=>{this.dialogRef.afterOpened().subscribe(()=>{t(!0)},n=>{e(n)})})}resizeMouseDown(t){let e=t.clientX,n=this.previewWidth$.value,r=h=>{if(e!==null){let q=n-(h.clientX-e);this.previewWidth$.next(Math.max(400,q))}},s=h=>{e=null,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)}ngOnDestroy(){this.routerSubscription?.unsubscribe(),this.dialogRef?.close()}static{this.\u0275fac=function(e){return new(e||i)(d(Be),d(ye),d(ae),d(j),d(oe))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&(X(Ri,7),X(Ai,5)),e&2){let r;K(r=J())&&(n.dropArea=r.first),K(r=J())&&(n.uploaderEl=r.first)}},decls:34,vars:28,consts:[["uploader",""],["droparea",""],["routerLink","/storage/buckets","icon","arrow_back"],["icon","file_upload",3,"clicked"],["type","file","hidden","","multiple","",3,"change"],["icon","create_new_folder",3,"clicked"],["icon","delete",3,"clicked","disabled"],[3,"clicked","icon"],[1,"droparea",3,"dragenter"],[1,"droparea-overlay",3,"dragover","dragleave","drop"],[3,"autosize"],["mode","side","position","end",2,"text-align","center",3,"opened","disableClose"],[1,"resize-handle",3,"mousedown"],[3,"src"],[2,"margin-top","4em","color","#fff"],[1,"panel-content"],[3,"bucket"],[2,"margin-top","16px"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["label","Buckets",3,"link"],[3,"link","label"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","modified"],["cdkColumnDef","size"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["download","",3,"click","href"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-menu-item","","download","",3,"href"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,n){if(e&1){let r=D();o(0,"app-storage-page")(1,"app-storage-toolbar"),f(2,"ya-page-icon-button",2),l(3),o(4,"ya-page-button",3),_("clicked",function(){C(r);let h=N(7);return b(h.click())}),l(5," Upload files "),o(6,"input",4,0),_("change",function(){return C(r),b(n.uploadObjects())}),a()(),o(8,"ya-page-button",5),_("clicked",function(){return C(r),b(n.createFolder())}),l(9," Create folder "),a(),o(10,"ya-page-button",6),_("clicked",function(){return C(r),b(n.deleteSelectedObjects())}),l(11," Delete "),a(),o(12,"ya-page-button",7),u(13,"async"),_("clicked",function(){return C(r),b(n.togglePreview())}),l(14," Preview panel "),a()(),o(15,"div",8,1),u(17,"async"),_("dragenter",function(h){return C(r),b(n.dragEnter(h))}),o(18,"div",9),u(19,"async"),_("dragover",function(h){return C(r),b(n.dragOver(h))})("dragleave",function(h){return C(r),b(n.dragLeave(h))})("drop",function(h){return C(r),b(n.drop(h))}),a(),o(20,"mat-sidenav-container",10)(21,"mat-sidenav",11),u(22,"async"),u(23,"async"),o(24,"div",12),_("mousedown",function(h){return C(r),b(n.resizeMouseDown(h))}),a(),g(25,Ni,1,1,"img",13)(26,Ui,5,0,"div",14),a(),o(27,"mat-sidenav-content")(28,"div",15),f(29,"app-bucket-page-tabs",16),g(30,Yi,6,6,"div",17),u(31,"async"),g(32,ln,18,3,"table",18)(33,cn,2,0,"ya-empty-message"),a()()()()()}if(e&2){let r;c(3),M(" ",n.name," \xA0\xA0\xA0 "),c(7),m("disabled",!n.selection.hasValue()),c(2),m("icon",v(13,16,n.showPreview$)?"image_not_supported":"image"),c(3),T("active",v(17,18,n.dragActive$)),c(3),T("hide",!v(19,20,n.dragActive$)),c(2),m("autosize",!0),c(),xe("width",v(22,22,n.previewWidth$)+"px"),m("opened",v(23,24,n.showPreview$))("disableClose",!1),c(4),S(n.selection.selected.length===1&&n.isImage(n.selection.selected[0])?25:26),c(4),m("bucket",n.name),c(),S((r=v(31,26,n.breadcrumb$))?30:-1,r),c(2),S(n.dataSource&&n.dataSource.data.length?32:33)}},dependencies:[Ce,x,U,z,vt,Me,je,Te,bt,fe,Ct,De,xt,St,kt,Oe,Le,Ie,Pe,Ve,Re,Ae,Fe,Et,Tt,Lt,Ue,ze,Ye,ge,Ft,_e,H,Q],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;box-sizing:content-box;color:#000000a7}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.droparea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.droparea-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;background:#1b61b91a;border:1px solid rgba(27,97,185,1);z-index:10;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}  .progress-dialog .mat-mdc-dialog-container{box-shadow:none;padding:0;overflow:hidden}  .progress-dialog .mat-mdc-dialog-content{overflow:hidden}.mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:inherit}.mat-sidenav-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{background-color:#000}.mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow:hidden!important}.resize-handle[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;width:20px;bottom:0;cursor:ew-resize;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.mat-sidenav-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:2em;max-width:calc(100% - 5em);max-height:calc(100% - 5em)}"],changeDetection:0})}};var et=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-bucket-placeholder"]],decls:1,vars:0,template:function(e,n){e&1&&f(0,"router-outlet")},dependencies:[re],encapsulation:2,changeDetection:0})}};function sn(i,t){if(i&1&&(o(0,"dt"),l(1,"Directory"),a(),o(2,"dd"),l(3),a()),i&2){let e=p();c(3),B(e.directory)}}function mn(i,t){if(i&1&&(o(0,"div",3)(1,"dl",4)(2,"dt"),l(3,"Created"),a(),o(4,"dd"),l(5),u(6,"datetime"),u(7,"nvl"),a(),o(8,"dt"),l(9,"Location"),a(),o(10,"dd"),l(11),a(),g(12,sn,4,1),a(),o(13,"h3"),l(14,"Bucket size"),a(),o(15,"dl",4)(16,"dt"),l(17,"Limit"),a(),o(18,"dd"),l(19),u(20,"formatBytes"),u(21,"nvl"),a(),o(22,"dt"),l(23,"Used"),a(),o(24,"dd"),l(25),u(26,"formatBytes"),u(27,"nvl"),a(),o(28,"dt"),l(29,"Available"),a(),o(30,"dd"),l(31),u(32,"formatBytes"),a()(),o(33,"h3"),l(34,"Object count"),a(),o(35,"dl",4)(36,"dt"),l(37,"Limit"),a(),o(38,"dd"),l(39),u(40,"nvl"),a(),o(41,"dt"),l(42,"Used"),a(),o(43,"dd"),l(44),u(45,"nvl"),a(),o(46,"dt"),l(47,"Available"),a(),o(48,"dd"),l(49),a()()()),i&2){let e=t,n=p();c(5),B(E(7,11,v(6,9,e.created),"-")),c(6),B(e.location.description),c(),S(e.directory?12:-1),c(7),B(E(21,16,v(20,14,e.maxSize),"-")),c(6),B(E(27,21,v(26,19,e.size),"-")),c(6),B(v(32,24,n.zeroOrMore(e.maxSize-e.size))),c(8),B(E(40,26,e.maxObjects,"-")),c(5),B(E(45,29,e.numObjects,"-")),c(5),B(n.zeroOrMore(e.maxObjects-e.numObjects))}}var tt=class i{constructor(t,e,n){this.bucket$=new $(null);this.name=t.snapshot.parent.paramMap.get("name"),n.setTitle(this.name+": Properties"),this.storageClient=e.createStorageClient(),this.storageClient.getBucket(this.name).then(r=>{this.bucket$.next(r)})}bucketSizePercentage(t,e=!1){var n=100*t.size/t.maxSize;return e?Math.min(100,n):n}objectCountPercentage(t,e=!1){var n=100*t.numObjects/t.maxObjects;return e?Math.min(100,n):n}zeroOrMore(t){return Math.max(0,t)}static{this.\u0275fac=function(e){return new(e||i)(d(ae),d(j),d(oe))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],decls:8,vars:5,consts:[["routerLink","/storage/buckets","icon","arrow_back"],[1,"panel-content"],[3,"bucket"],[1,"small",2,"margin-top","16px"],[1,"dl-horizontal"]],template:function(e,n){if(e&1&&(o(0,"app-storage-page")(1,"app-storage-toolbar"),f(2,"ya-page-icon-button",0),l(3),a(),o(4,"div",1),f(5,"app-bucket-page-tabs",2),g(6,mn,50,32,"div",3),u(7,"async"),a()()),e&2){let r;c(3),M(" ",n.name," "),c(2),m("bucket",n.name),c(),S((r=v(7,3,n.bucket$))?6:-1,r)}},dependencies:[Ce,x,U,z,Ye,ge,_e,We,H,Q],styles:[".progress[_ngcontent-%COMP%]{display:inline-block;width:100px;position:relative;text-align:center;margin-right:5px;background-color:#eee;border:1px solid rgba(0,0,0,.1)}.fill[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:30%;background-color:#009e87;background:linear-gradient(to bottom,#009e87,#bce3dd 50%,#009e87)}.label[_ngcontent-%COMP%]{position:absolute;inset:0;margin:0 auto}"],changeDetection:0})}};var it=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],decls:5,vars:4,consts:[["messageBar",""],[1,"storage-page-content"]],template:function(e,n){if(e&1&&(f(0,"ya-message-bar",null,0),o(2,"div",1),u(3,"async"),f(4,"router-outlet"),a()),e&2){let r=N(1);c(2),T("message-bar-visible",v(3,2,r.show$))}},dependencies:[x,U,re,It],styles:[".storage-page-content[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:var(--y-background-color)}.storage-page-content.message-bar-visible[_ngcontent-%COMP%]{top:112px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fcfcfc;border-bottom:1px solid #d3d3d3;box-sizing:content-box;color:#000000a7}"],changeDetection:0})}};var da=[{path:"",canActivate:[Nt,zt],canActivateChild:[Ut],runGuardsAndResolvers:"always",component:it,children:[{path:"",pathMatch:"full",redirectTo:"buckets"},{path:"buckets",children:[{path:"",pathMatch:"full",component:He,data:{hasSidebar:!1}},{path:":name",children:[{path:"",pathMatch:"full",redirectTo:"objects"},{path:"objects",component:et,children:[{path:"**",component:Ze,data:{hasSidebar:!1}}]},{path:"properties",component:tt,data:{hasSidebar:!1}}]}]}]}];export{da as ROUTES};
